Author: Ralf Corsepius
Origin: http://cvs.rpmfusion.org/viewvc/rpms/zsnes/devel/zsnes-1.51-psr.patch?root=free&view=markup
Subject: Create an intermediate .c file instead of an .o file with parsegen,
 also needed to fix compilation with "-D_FORTIFY_SOURCE=2".

--- a/src/Makefile.in
+++ b/src/Makefile.in
@@ -94,8 +94,8 @@ Z_OBJS=$(MAIN_O) $(CHIP_O) $(CPU_O) $(DE
 	@CC@ @CFLAGS@ -o $@ -c $<
 %.o: %.cpp
 	@CXX@ @CXXFLAGS@ -o $@ -c $<
-%.o %.h: %.psr $(PSR)
-	./$(PSR) @PSRFLAGS@ -gcc @CC@ -compile -flags "@CFLAGS@ -O1" -cheader $*.h -fname $* $*.o $<
+%.c %.h: %.psr $(PSR)
+	./$(PSR) @PSRFLAGS@ -cheader $*.h -fname $* $*.c $<
 
 default: main
 all: main tools
